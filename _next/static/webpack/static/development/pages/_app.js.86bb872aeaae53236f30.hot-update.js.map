{"version":3,"file":"static/webpack/static\\development\\pages\\_app.js.86bb872aeaae53236f30.hot-update.js","sources":["webpack:///./components/Title.tsx"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { Icon } from 'antd';\r\nimport classnames from 'classnames';\r\nimport throttle from 'lodash/throttle';\r\nimport Router, { RouterProps } from 'next/router';\r\n\r\nimport { CSSMapper } from '../types/utils';\r\nimport Events from '../utils/Events';\r\nimport { IPost } from '../types/post';\r\n\r\ninterface IProps {\r\n    router?: RouterProps;\r\n}\r\n\r\ninterface IState {\r\n    visible?: boolean;\r\n    post?: IPost;\r\n}\r\n\r\nconst styles: CSSMapper = {\r\n    container: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        height: '100%',\r\n    },\r\n    menuCollapse: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-start',\r\n        marginLeft: 16,\r\n        cursor: 'pointer',\r\n    },\r\n    title: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        flex: 1,\r\n        color: '#000',\r\n        fontWeight: 500,\r\n        whiteSpace: 'nowrap',\r\n    },\r\n    search: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n        alignItems: 'center',\r\n        marginRight: 16,\r\n    },\r\n};\r\n\r\nclass Title extends Component<IProps, IState> {\r\n    private timeoutId: NodeJS.Timeout;\r\n\r\n    state: IState = {\r\n        post: {},\r\n        visible: false,\r\n    }\r\n\r\n    componentDidMount() {\r\n        const content = document.querySelector('.blog-post');\r\n        this.waitForPostContainer(content);\r\n        Events.on('setpost', (post) => {\r\n            if (post !== this.state.post) {\r\n                this.setState({\r\n                    post,\r\n                    visible: false,\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.detachEvents();\r\n    }\r\n\r\n    waitForPostContainer = (content) => {\r\n        setTimeout(() => {\r\n            if (content) {\r\n                this.attachEvents(content);\r\n                return;\r\n            }\r\n            const queryContent = document.querySelector('.blog-post');\r\n            this.waitForPostContainer(queryContent);\r\n        }, 5);\r\n    }\r\n\r\n    attachEvents = (content) => {\r\n        content.addEventListener('scroll', this.onScroll);\r\n    }\r\n\r\n    detachEvents = () => {\r\n        const content = document.querySelector('.container');\r\n        if (content) {\r\n            content.removeEventListener('scroll', this.onScroll);\r\n        }\r\n    }\r\n\r\n    onScroll = throttle((e: any) => {\r\n        if (e.target.scrollTop >= 64) {\r\n            const content = document.querySelector('.blog-backtop');\r\n            if (content) {\r\n                content.classList.add('visible');\r\n            }\r\n            if (this.timeoutId) {\r\n                clearTimeout(this.timeoutId);\r\n            }\r\n            this.timeoutId = setTimeout(() => {\r\n                const content = document.querySelector('.blog-backtop');\r\n                if (content) {\r\n                    content.classList.remove('visible');\r\n                }\r\n            }, 1500);\r\n            if (Router.pathname === '/') {\r\n                return;\r\n            }\r\n            if (!this.state.visible) {\r\n                this.setState({\r\n                    visible: true,\r\n                });\r\n            }\r\n        } else {\r\n            const content = document.querySelector('.blog-backtop');\r\n            if (content) {\r\n                content.classList.remove('visible');\r\n            }\r\n            if (this.state.visible) {\r\n                this.setState({\r\n                    visible: false,\r\n                });\r\n            }\r\n        }\r\n    }, 200)\r\n\r\n    handleSearch = () => {\r\n        Events.emit('searchcollapse');\r\n    }\r\n\r\n    handlePosts = () => {\r\n        this.setState({\r\n            visible: false,\r\n        });\r\n        Router.push('/');\r\n    }\r\n\r\n    render() {\r\n        const { visible, post } = this.state;\r\n        const classname = classnames('container-title', {\r\n            visible,\r\n        });\r\n        return (\r\n            <div style={styles.container}>\r\n                <div style={styles.menuCollapse}>\r\n                    <Icon style={{ fontSize: '1.25rem' }} type=\"bars\" onClick={this.handlePosts} />\r\n                </div>\r\n                <div style={styles.title}>\r\n                    <h2 className={classname}>\r\n                        {visible && post.title}\r\n                    </h2>\r\n                    {!visible && (\r\n                        <a href=\"https://github.com/salgum1114\" target=\"_blank\">\r\n                            <Icon style={{ fontSize: '1.25rem' }} type=\"github\" />\r\n                        </a>\r\n                    )}\r\n                </div>\r\n                <div style={styles.search}>\r\n                    <Icon style={{ fontSize: '1.25rem' }} type=\"search\" onClick={this.handleSearch} />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Title;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AAGA;AAYA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AAJA;AApBA;AACA;AA2BA;;;;;;;;;;;;;;;;;;AAGA;AACA;AACA;AAFA;AACA;AAqBA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;;;;;;AArFA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;;;AAEA;AACA;AACA;;;AAuEA;AAAA;AAAA;AAAA;AAEA;AACA;AADA;AAGA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AAvHA;AACA;AAyHA;;;;A","sourceRoot":""}